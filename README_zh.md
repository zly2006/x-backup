# X Backup

X Backup 是一个 Minecraft 服务器模组，可以帮助你管理游戏的备份，包括创建、恢复、查看、定时备份和镜像服务器等功能。

## 优势

- ⚡️极速备份：利用多线程技术进行快速备份，以极短的时间完成任务，**速度提高了 50 倍**。 [^1]
- 💾高效利用空间：实现增量备份并自动压缩大文件，最大限度地减少存储使用。
- 🔄无缝回档：在还原后自动重启服务器，实现无缝体验。
- ✨区域回档：仅还原指定范围内的区块，**范围外的玩家不会受到影响**。
- 🛡️全面支持：同时支持服务器和客户端，为您的所有备份需求提供多功能解决方案。
- ☁️自动云备份：轻松将数据备份到云端，支持 Microsoft OneDrive，确保您的信息安全并可以随时访问。

## 如何将语言设置为中文

在 `config/x-backup.config.json` 中将 `language` 设置为 `zh_cn` 即可，或者客户端安装本模组时选择中文。

## 用法

### 创建备份

你可以使用`/xb create`命令来创建一个新的备份。这个命令会保存当前游戏的状态，以便你以后可以恢复到这个状态。如果你想给备份添加一个备注，可以在命令后面加上备注内容，例如：

```
/xb create 这是我的第一个备份
```

这样，你就创建了一个带有备注的备份。

### 查看已创建的备份

如果你想查看已经创建的备份，可以使用`/xb list`命令。这个命令会列出所有的备份，并显示每个备份的编号、创建时间和备注。例如：

```
/xb list
```

这个命令会显示最近的6个备份。如果你有很多备份，可以点击灰色字体的按钮来查看更多备份。

### 恢复备份

如果你想恢复到某个备份，可以使用`/xb restore <id>`命令，其中`<id>`是备份的编号。例如：

```
/xb restore 1
```

这个命令会将游戏恢复到编号为1的备份状态。如果你想恢复特定的范围，可以使用`--chunk`参数，指定从哪个坐标到哪个坐标，例如：

```
/xb restore 1 --chunk 0 0 10 10
```

> [!TIP]
> 这是方块的x/z坐标，不要和区块坐标混淆。

这会将游戏恢复到备份1，但只恢复从方块坐标(0, 0)到(10, 10)的区域。

### 定时备份配置

你可以设置自动备份的时间间隔，使用`/xb backup-interval <秒数>`命令。例如，如果你想每3小时自动备份一次，可以这样设置：

```
/xb backup-interval 10800
```

这个命令会将自动备份的时间间隔设置为10800秒（即3小时）。

### 镜像服配置

如果你在使用镜像服务器，可以使用`/mirror`命令来同步主服最新的备份。例如：

首先，你需要在主服上创建一个备份：

```
/xb create
```

然后，在镜像服配置中，设置主服的文件路径，并打开镜像模式：

```json
{
  "mirror_mode": true,   
  "mirror_from": "C:\\MinecraftServer\\My-Server"
}
```

之后再执行`/mirror`命令， 这个命令会将主服的最新备份状态同步到镜像服。你也可以添加`id`参数，指定要同步的备份编号：

```
/mirror 1
```

如果你想停止服务器并恢复备份，可以使用`--stop`参数：

```
/mirror --stop
```

### 清理删除不需要的备份

模组还提供了自动清理旧备份的功能。你可以在配置文件中设置`keep_policy`，例如：

```json
{
  "prune": {
    "keep_policy": {
      "1d": "30m",
      "1w": "6h",
      "1M": "1d",
      "1y": "1w",
      "2y": "1M"
    }
  }
}
```

这个配置表示：
- 保留最近1天内每30分钟的备份
- 保留最近1周内每6小时的备份
- 保留最近1个月内每天的备份
- 保留最近1年内每周的备份
- 保留最近2年内每月的备份

你可以根据自己的需求调整这些设置。
